"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[770],{2887:function(t,e,r){r.d(e,{Ej:function(){return f},Xp:function(){return p},Y2:function(){return l},cE:function(){return h},kh:function(){return u},nM:function(){return d},ry:function(){return s},su:function(){return a},w$:function(){return m},wv:function(){return i}});var n=r(4165),c=r(5861),o=r(1243),s=function(){var t=(0,c.Z)((0,n.Z)().mark((function t(e,r){return(0,n.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,o.Z.post("".concat("https://ecommerce-mern-5e1j.onrender.com/api","/product"),e,{headers:{authtoken:r}});case 2:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}(),a=function(){var t=(0,c.Z)((0,n.Z)().mark((function t(e){return(0,n.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,o.Z.get("".concat("https://ecommerce-mern-5e1j.onrender.com/api","/products/").concat(e),{headers:{}});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),u=function(){var t=(0,c.Z)((0,n.Z)().mark((function t(e,r){return(0,n.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,o.Z.delete("".concat("https://ecommerce-mern-5e1j.onrender.com/api","/product/").concat(e),{headers:{authtoken:r}});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}(),i=function(){var t=(0,c.Z)((0,n.Z)().mark((function t(e){return(0,n.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,o.Z.get("".concat("https://ecommerce-mern-5e1j.onrender.com/api","/product/").concat(e));case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),d=function(){var t=(0,c.Z)((0,n.Z)().mark((function t(e,r,c){return(0,n.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,o.Z.put("".concat("https://ecommerce-mern-5e1j.onrender.com/api","/product/").concat(e),r,{headers:{authtoken:c}});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e,r,n){return t.apply(this,arguments)}}(),p=function(){var t=(0,c.Z)((0,n.Z)().mark((function t(e,r,c){return(0,n.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,o.Z.post("https://ecommerce-mern-5e1j.onrender.com/api/products",{sort:e,order:r,page:c});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e,r,n){return t.apply(this,arguments)}}(),l=function(){var t=(0,c.Z)((0,n.Z)().mark((function t(){return(0,n.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,o.Z.post("".concat("https://ecommerce-mern-5e1j.onrender.com/api","/products/total"));case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),f=function(){var t=(0,c.Z)((0,n.Z)().mark((function t(e,r,c){return(0,n.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,o.Z.put("".concat("https://ecommerce-mern-5e1j.onrender.com/api","/product/star/").concat(e),{star:r},{headers:{authtoken:c}});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e,r,n){return t.apply(this,arguments)}}(),h=function(){var t=(0,c.Z)((0,n.Z)().mark((function t(e){return(0,n.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,o.Z.get("".concat("https://ecommerce-mern-5e1j.onrender.com/api","/product/related/").concat(e));case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),m=function(){var t=(0,c.Z)((0,n.Z)().mark((function t(e){return(0,n.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,o.Z.post("".concat("https://ecommerce-mern-5e1j.onrender.com/api","/search/filters"),e);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},2531:function(t,e,r){r.d(e,{E9:function(){return s},Ih:function(){return i},NY:function(){return a},WR:function(){return d},sA:function(){return u}});var n=r(4165),c=r(5861),o=r(1243),s=function(){var t=(0,c.Z)((0,n.Z)().mark((function t(e,r){return(0,n.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,o.Z.post("".concat("https://ecommerce-mern-5e1j.onrender.com/api","/user/cart"),{cart:e},{headers:{authtoken:r}});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}(),a=function(){var t=(0,c.Z)((0,n.Z)().mark((function t(e){return(0,n.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,o.Z.get("".concat("https://ecommerce-mern-5e1j.onrender.com/api","/user/cart"),{headers:{authtoken:e}});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),u=function(){var t=(0,c.Z)((0,n.Z)().mark((function t(e){return(0,n.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,o.Z.get("".concat("https://ecommerce-mern-5e1j.onrender.com/api","/user/wishlist"),{headers:{authtoken:e}});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),i=function(){var t=(0,c.Z)((0,n.Z)().mark((function t(e,r){return(0,n.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,o.Z.put("".concat("https://ecommerce-mern-5e1j.onrender.com/api","/user/wishlist/").concat(r),{},{headers:{authtoken:e}});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}(),d=function(){var t=(0,c.Z)((0,n.Z)().mark((function t(e,r){return(0,n.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,o.Z.post("".concat("https://ecommerce-mern-5e1j.onrender.com/api","/user/wishlist"),{productId:r},{headers:{authtoken:e}});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}()},4967:function(t,e,r){r.d(e,{Z:function(){return k}});var n=r(9439),c=r(1413),o=r(2791),s=r(6473),a=r(4951),u=r(7027),i=r(183),d=r(4215),p=r(6533),l=r(7689),f=r(1087),h=r(763),m=r.n(h),x=r(6137),Z=r(9434),g=r(3936),v=r(184),j=s.Z.Meta,w=a.Z.Text,k=function(t){var e=t.product,r=t.loading,a=(0,Z.I0)(),h=((0,l.s0)(),e.title),k=e.description,y=e.images,b=e.slug,S=e.price,N=y&&y.length?y[0][0].url:"",E=(0,o.useState)(!0),C=(0,n.Z)(E,2),I=C[0],A=C[1];return(0,o.useEffect)((function(){var t=setTimeout((function(){A(!1)}),800);return function(){return clearTimeout(t)}}),[r]),(0,v.jsxs)(s.Z,{hoverable:!0,loading:r||I,cover:r||I?(0,v.jsx)(i.Z.Image,{style:{width:"100%",height:"auto",paddingBottom:"60%"}}):(0,v.jsx)("img",{src:N,alt:h}),actions:[(0,v.jsxs)(f.rU,{to:"/product/".concat(b),children:[(0,v.jsx)(d.Z,{})," ",(0,v.jsx)("br",{})," view"]}),(0,v.jsxs)("a",{onClick:function(){var t=[];if("undefined"!==typeof window){localStorage.getItem("cart")&&(t=JSON.parse(localStorage.getItem("cart"))),t.push((0,c.Z)((0,c.Z)({},e),{},{count:1}));var r=m().uniqWith(t,m().isEqual);console.log("unique",r),localStorage.setItem("cart",JSON.stringify(r)),a((0,x.P)(t)),a((0,g.F)(!0))}u.ZP.info("Added to cart")},children:[(0,v.jsx)(p.Z,{})," ",(0,v.jsx)("br",{}),"Add to cart"]})],className:"product-card",children:[(0,v.jsx)(j,{title:h,description:"".concat(k&&k.substring(0,35),"...")}),(0,v.jsx)(j,{title:(0,v.jsxs)(w,{style:{color:"#008080"},children:["\u20b9",S]})})]})}},152:function(t,e,r){r.r(e),r.d(e,{default:function(){return I}});var n=r(9439),c=r(2791),o=r(2887),s=r(7689),a=r(1413),u=r(6473),i=r(5058),d=r(7027),p=r(7391),l=r(6533),f=r(197),h=(r(8040),r(5778)),m=r(184),x=function(t){if(t&&t.ratings){var e=t.ratings,r=0,n=e.length;e.forEach((function(t){r+=t.star}));var c=r/n;return c=Math.round(10*c)/10,(0,m.jsxs)("div",{children:[(0,m.jsx)(h.Z,{rating:c,starRatedColor:"#FFD700",starEmptyColor:"#D3D3D3",starDimension:"20px",starSpacing:"2px"}),(0,m.jsxs)("span",{children:["(",n,")"]})]})}},Z=r(995),g=r(740),v=(r(4088),r(9434)),j=function(t){var e=t.children,r=((0,s.UO)().slug,(0,s.s0)()),o=(0,v.v9)((function(t){return t.user.userid})),a=(0,c.useState)(!1),u=(0,n.Z)(a,2),i=u[0],p=u[1];return(0,m.jsxs)(m.Fragment,{children:[(0,m.jsxs)("div",{onClick:function(){o&&o.idtoken?p(!0):r("/login")},children:[(0,m.jsx)(g.Z,{color:"red"}),(0,m.jsx)("br",{}),o?"leave rating":"login to leave rating"]}),(0,m.jsx)(Z.Z,{title:"leave rating",centered:!0,open:i,onCancel:function(){p(!1)},onOk:function(){p(!1),d.ZP.success("thanks for review")},children:e})]})},w=r(763),k=r.n(w),y=r(6137),b=r(2531),S=u.Z.Meta,N=i.Z.TabPane,E=function(t){var e=t.product,r=t.onStarclick,n=t.star,c=t.loading,o=(0,v.v9)((function(t){return t.user.userid})),Z=(0,s.s0)(),g=(0,v.I0)(),w=e.title,E=e.price,C=e.images,I=e.description,A=e.brand,D=e.color,O=e._id;if(!C||!Array.isArray(C)||0===C.length)return null;return console.log("deqda",o&&o.idtoken),(0,m.jsxs)("div",{className:"view-product",children:[(0,m.jsx)("div",{className:"images-carousel",children:(0,m.jsx)(f.lr,{showArrows:!0,autoPlay:!0,infiniteLoop:!0,children:C.map((function(t,e){return(0,m.jsx)("div",{children:t.map((function(t){return(0,m.jsx)("img",{className:"product-images",src:t.url,alt:w},t.public_id)}))},e)}))})}),(0,m.jsx)("div",{className:"card-details",children:(0,m.jsxs)(u.Z,{loading:c,actions:[(0,m.jsx)("div",{children:(0,m.jsxs)("a",{onClick:function(t){o&&(0,b.WR)(o.idtoken,e._id).then((function(t){d.ZP.success("Added to wishlist"),Z("/user/wishlist")}))},children:[(0,m.jsx)(p.Z,{style:{color:"red",fontSize:"1.3rem"},title:"wishlist"}),(0,m.jsx)("br",{}),"Wishlist"]})}),(0,m.jsx)("div",{children:(0,m.jsxs)("a",{onClick:function(){var t=[];if("undefined"!==typeof window){localStorage.getItem("cart")&&(t=JSON.parse(localStorage.getItem("cart"))),t.push((0,a.Z)((0,a.Z)({},e),{},{count:1}));var r=k().uniqWith(t,k().isEqual);console.log("unique",r),localStorage.setItem("cart",JSON.stringify(r)),g((0,y.P)(t))}d.ZP.info("Added to cart")},children:[(0,m.jsx)(l.Z,{style:{color:"green",fontSize:"1.3rem"},title:"add to cart"}),(0,m.jsx)("br",{})," add to cart"]})}),(0,m.jsx)(j,{children:(0,m.jsx)(h.Z,{name:O,numberOfStars:5,rating:n,changeRating:r,starRatedColor:"#FFD700",starEmptyColor:"#D3D3D3",starDimension:"20px",starSpacing:"2px"})})],children:[(0,m.jsx)("div",{children:e&&e.ratings&&e.ratings.length>0?x(e):"(NO RATINGS YET)"}),(0,m.jsx)(S,{title:w}),(0,m.jsxs)("div",{className:"additional-details",children:[(0,m.jsxs)("p",{className:"product-brand",children:["Brand: ",A]}),(0,m.jsxs)("p",{className:"product-color",children:["Color: ",D]}),(0,m.jsxs)("p",{style:{color:"#008080"},className:"product-price",children:["Price: \u20b9",E]}),(0,m.jsxs)(i.Z,{type:"card",children:[(0,m.jsx)(N,{tab:"About",children:I},"1"),(0,m.jsx)(N,{tab:"More",children:"Call us xxxx7xxx"},"2")]})]})]})})]})},C=r(4967),I=function(){var t=(0,c.useState)({}),e=(0,n.Z)(t,2),r=e[0],a=e[1],u=(0,v.v9)((function(t){return t.user.userid})),i=(0,s.UO)().slug,d=(0,c.useState)(!1),p=(0,n.Z)(d,2),l=p[0],f=p[1],h=(0,c.useState)(0),x=(0,n.Z)(h,2),Z=x[0],g=x[1],j=(0,c.useState)([]),w=(0,n.Z)(j,2),k=w[0],y=w[1];(0,c.useEffect)((function(){b()}),[i]),(0,c.useEffect)((function(){if(u&&r.ratings&&r.ratings.length>0){var t=r.ratings.find((function(t){return console.log("ele:",t),t.postedBy.toString()===u._id.toString()}));console.log("existingRatingObject:",t),g(t?t.star:0)}}),[r,u]);var b=function(){f(!0),(0,o.wv)(i).then((function(t){a(t.data),f(!1),(0,o.cE)(t.data._id).then((function(t){y(t.data)})).catch((function(t){console.log(console.error)}))}))};return(0,m.jsxs)("div",{className:"view-product-container",children:[(0,m.jsx)("div",{className:"view-product",children:(0,m.jsx)(E,{product:r,onStarclick:function(t,e){g(t),console.log(t,e),(0,o.Ej)(e,t,u.idtoken).then((function(t){console.log("rating clicked",t.data)}))},star:Z})}),(0,m.jsx)("hr",{}),(0,m.jsxs)("div",{className:"related-products",children:[(0,m.jsx)("h2",{children:"Related Products"}),(0,m.jsx)("div",{style:{display:"flex",overflowX:"auto",gap:"1rem",marginLeft:"2rem"},children:k.length>0?k.map((function(t){return(0,m.jsx)("div",{style:{display:"grid"},children:(0,m.jsx)(C.Z,{loading:l,product:t})},t._id)})):"No items to show"})]})]})}}}]);
//# sourceMappingURL=770.6a592990.chunk.js.map